<!-- Probably move the stylesheet to you layout. Also make sure you include the javascript. -->
<%= stylesheet_link_tag "event_calendar" %>

<script>
function make_hidden( name, value, formid ){
    var q = document.createElement('input');
    q.type = 'hidden';
    q.name = name;
    q.value = value;
    if (formid){
      var elm = document.getElementById(formid);
      elm.appendChild(q);
    }
    else{
      document.forms[0].appendChild(q);
    }
    // if (formname){ document.forms[formname].appendChild(q); }
    // else{ document.forms[0].appendChild(q); }
}

function delete_hidden( name, value, formname ){
    var dom_obj_array = window.document.getElementsByName(name);
    for (var i=0; i<dom_obj_array.length; i++){
        if ( dom_obj_array[i].value === value ){
            element = dom_obj_array[i];
            element.parentNode.removeChild(element);
        }
    }
}
</script>

<script>
function  selectedDates(){

  $.each(dates, function(index, value){
    make_hidden('selected[]', value, 'new_event');
  });
  return true;
}
</script>
<style>
  .selected a{
    background: orange !important
  }
</style>

<div style="display:inline-flex", id="table">




<table border="0", height=1050, onmousedown="mouseDown(this, event); return false;" onmouseup="mouseUp(this, event);" onmousemove="mouseMove(this, event); return false;">
<head>
<caption></caption>
  <thead>
  <tr bgcolor="green">
    <tr height =50><th></th></tr>
    </tr>
  </thead>
  <tbody>
    <!-- <tr><td><a href="index">1:00</a></td></tr> -->
    <tr><td>0:00</td></tr>
    <tr><td>1:00</td></tr>
    <tr><td>2:00</td></tr>
    <tr><td>3:00</td></tr>
    <tr class="odd"><td>4:00</td></tr>
    <tr><td>5:00</td></tr>
    <tr><td>6:00</td></tr>
    <tr class="odd"><td>7:00</td></tr>
    <tr><td>8:00</td></tr>
    <tr class="odd"><td>9:00</td></tr>
    <tr><td>10:00</td></tr>
    <tr><td>11:00</td></tr>
    <tr class="odd"><td>12:00</td></tr>
    <tr><td>13:00</td></tr>
    <tr class="odd"><td>14:00</td></tr>
    <tr><td>15:00</td></tr>
    <tr><td>16:00</td></tr>
    <tr class="odd"><td>17:00</td></tr>
    <tr><td>18:00</td></tr>
    <tr class="odd"><td>19:00</td></tr>
    <tr><td>20:00</td></tr>
    <tr><td>21:00</td></tr>
    <tr class="odd"><td>22:00</td></tr>
    <tr><td>23:00</td></tr>
    <tr class="odd"><td>24:00</td></tr>
  </tbody>
  </head>
</table>




<table border width=160, height=1000 >
<head>
  <caption><%= I18n.localize(Date.today, :format => :short) %></caption>
  <thead>
  <tr>
<!-- <<<<<<< HEAD
    <tr height = "38"><th>予定</th><th>場所</th></tr>
    </tr>
  </thead>
  <tbody>
    <tr height = "38"><td><%= if !@today[0].nil? then link_to @today[0].name, action: 'index', id: @today[0].id end %></td><td><%= if !@today[0].nil? then @today[0].place else "\n" end %></td></tr>
    <tr class="odd"  height = "38"><td><%= if !@today[1].nil? then link_to @today[1].name, action: 'index', id: @today[1].id end %></td><td><%= if !@today[1].nil? then @today[1].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[2].nil? then link_to @today[2].name, action: 'index', id: @today[2].id end %></td><td><%= if !@today[2].nil? then @today[2].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@today[3].nil? then link_to @today[3].name, action: 'index', id: @today[3].id end %></td><td><%= if !@today[3].nil? then @today[3].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[4].nil? then link_to @today[4].name, action: 'index', id: @today[3].id end %></td><td><%= if !@today[4].nil? then @today[4].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[5].nil? then link_to @today[5].name, action: 'index', id: @today[5].id end %></td><td><%= if !@today[5].nil? then @today[5].place end %></td></tr>
    <tr height = "38" class="odd"><td><%= if !@today[6].nil? then link_to @today[6].name, action: 'index', id: @today[6].id end %></td><td><%= if !@today[6].nil? then @today[6].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[7].nil? then link_to @today[7].name, action: 'index', id: @today[7].id end %></td><td><%= if !@today[7].nil? then @today[7].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@today[8].nil? then link_to @today[8].name, action: 'index', id: @today[8].id end %></td><td><%= if !@today[8].nil? then @today[8].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[9].nil? then link_to @today[9].name, action: 'index', id: @today[9].id end %></td><td><%= if !@today[9].nil? then @today[9].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[10].nil? then link_to @today[10].name, action: 'index', id: @today[10].id end %></td><td><%= if !@today[10].nil? then @today[10].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@today[11].nil? then link_to @today[11].name, action: 'index', id: @today[11].id end %></td><td><%= if !@today[11].nil? then @today[11].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[12].nil? then link_to @today[12].name, action: 'index', id: @today[12].id end %></td><td><%= if !@today[12].nil? then @today[12].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@today[13].nil? then link_to @today[13].name, action: 'index', id: @today[13].id end %></td><td><%= if !@today[13].nil? then @today[13].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[14].nil? then link_to @today[14].name, action: 'index', id: @today[14].id end %></td><td><%= if !@today[14].nil? then @today[14].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[15].nil? then link_to @today[15].name, action: 'index', id: @today[15].id end %></td><td><%= if !@today[15].nil? then @today[15].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@today[16].nil? then link_to @today[16].name, action: 'index', id: @today[16].id end %></td><td><%= if !@today[16].nil? then @today[16].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[17].nil? then link_to @today[17].name, action: 'index', id: @today[17].id end %></td><td><%= if !@today[17].nil? then @today[17].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@today[18].nil? then link_to @today[18].name, action: 'index', id: @today[18].id end %></td><td><%= if !@today[18].nil? then @today[18].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[19].nil? then link_to @today[19].name, action: 'index', id: @today[19].id end %></td><td><%= if !@today[19].nil? then @today[19].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[20].nil? then link_to @today[20].name, action: 'index', id: @today[20].id end %></td><td><%= if !@today[20].nil? then @today[20].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@today[21].nil? then link_to @today[21].name, action: 'index', id: @today[21].id end %></td><td><%= if !@today[21].nil? then @today[21].place end %></td></tr>
    <tr height = "38"><td><%= if !@today[22].nil? then link_to @today[22].name, action: 'index', id: @today[22].id end %></td><td><%= if !@today[22].nil? then @today[22].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@today[23].nil? then link_to @today[23].name, action: 'index', id: @today[23].id end %></td><td><%= if !@today[23].nil? then @today[23].place end %></td></tr>
======= -->
    <tr height = "38" bgcolor="#c0c0c0"><th>予定</th><th>場所</th></tr>
    </tr>
  </thead>
  <tbody>
   <% if !@today[0].nil? && @today[0].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[0].nil? then link_to @today[0].name, action: 'index', id: @today[0].id end %></td><td><%= if !@today[0].nil? then @today[0].place end %></td></th>
    <% elsif !@today[0].nil? && @today[0].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[0].nil? then link_to @today[0].name, action: 'index', id: @today[0].id end %></td><td><%= if !@today[0].nil? then @today[0].place end %></td></th>
    <% elsif !@today[0].nil? && @today[0].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[0].nil? then link_to @today[0].name, action: 'index', id: @today[0].id end %></td><td><%= if !@today[0].nil? then @today[0].place end %></td></th>
    <% elsif !@today[0].nil? && @today[0].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[0].nil? then link_to @today[0].name, action: 'index', id: @today[0].id end %></td><td><%= if !@today[0].nil? then @today[0].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[0].nil? then link_to @today[0].name, action: 'index', id: @today[0].id end %></td><td><%= if !@today[0].nil? then @today[0].place end %></td></tr>
     <% end %>

   <% if !@today[1].nil? && @today[1].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[1].nil? then link_to @today[1].name, action: 'index', id: @today[1].id end %></td><td><%= if !@today[1].nil? then @today[1].place end %></td></th>
    <% elsif !@today[1].nil? && @today[1].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[1].nil? then link_to @today[1].name, action: 'index', id: @today[1].id end %></td><td><%= if !@today[1].nil? then @today[1].place end %></td></th>
    <% elsif !@today[1].nil? && @today[1].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[1].nil? then link_to @today[1].name, action: 'index', id: @today[1].id end %></td><td><%= if !@today[1].nil? then @today[1].place end %></td></th>
    <% elsif !@today[1].nil? && @today[1].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[1].nil? then link_to @today[1].name, action: 'index', id: @today[1].id end %></td><td><%= if !@today[1].nil? then @today[1].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[1].nil? then link_to @today[1].name, action: 'index', id: @today[1].id end %></td><td><%= if !@today[1].nil? then @today[1].place end %></td></tr>
     <% end %>

  <% if !@today[2].nil? && @today[2].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[2].nil? then link_to @today[2].name, action: 'index', id: @today[2].id end %></td><td><%= if !@today[2].nil? then @today[2].place end %></td></th>
    <% elsif !@today[2].nil? && @today[2].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[2].nil? then link_to @today[2].name, action: 'index', id: @today[2].id end %></td><td><%= if !@today[2].nil? then @today[2].place end %></td></th>
    <% elsif !@today[2].nil? && @today[2].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[2].nil? then link_to @today[2].name, action: 'index', id: @today[2].id end %></td><td><%= if !@today[2].nil? then @today[2].place end %></td></th>
    <% elsif !@today[2].nil? && @today[2].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[2].nil? then link_to @today[2].name, action: 'index', id: @today[2].id end %></td><td><%= if !@today[2].nil? then @today[2].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[2].nil? then link_to @today[2].name, action: 'index', id: @today[2].id end %></td><td><%= if !@today[2].nil? then @today[2].place end %></td></tr>
     <% end %>

  <% if !@today[3].nil? && @today[3].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[3].nil? then link_to @today[3].name, action: 'index', id: @today[3].id end %></td><td><%= if !@today[3].nil? then @today[3].place end %></td></th>
    <% elsif !@today[3].nil? && @today[3].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[3].nil? then link_to @today[3].name, action: 'index', id: @today[3].id end %></td><td><%= if !@today[3].nil? then @today[3].place end %></td></th>
    <% elsif !@today[3].nil? && @today[3].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[3].nil? then link_to @today[3].name, action: 'index', id: @today[3].id end %></td><td><%= if !@today[3].nil? then @today[3].place end %></td></th>
    <% elsif !@today[3].nil? && @today[3].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[3].nil? then link_to @today[3].name, action: 'index', id: @today[3].id end %></td><td><%= if !@today[3].nil? then @today[3].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[3].nil? then link_to @today[3].name, action: 'index', id: @today[3].id end %></td><td><%= if !@today[3].nil? then @today[3].place end %></td></tr>
     <% end %>

  <% if !@today[4].nil? && @today[4].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[4].nil? then link_to @today[4].name, action: 'index', id: @today[4].id end %></td><td><%= if !@today[4].nil? then @today[4].place end %></td></th>
    <% elsif !@today[4].nil? && @today[4].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[4].nil? then link_to @today[4].name, action: 'index', id: @today[4].id end %></td><td><%= if !@today[4].nil? then @today[4].place end %></td></th>
    <% elsif !@today[4].nil? && @today[4].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[4].nil? then link_to @today[4].name, action: 'index', id: @today[4].id end %></td><td><%= if !@today[4].nil? then @today[4].place end %></td></th>
    <% elsif !@today[4].nil? && @today[4].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[4].nil? then link_to @today[4].name, action: 'index', id: @today[4].id end %></td><td><%= if !@today[4].nil? then @today[4].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[4].nil? then link_to @today[4].name, action: 'index', id: @today[4].id end %></td><td><%= if !@today[4].nil? then @today[4].place end %></td></tr>
     <% end %>

  <% if !@today[5].nil? && @today[5].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[5].nil? then link_to @today[5].name, action: 'index', id: @today[5].id end %></td><td><%= if !@today[5].nil? then @today[5].place end %></td></th>
    <% elsif !@today[5].nil? && @today[5].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[5].nil? then link_to @today[5].name, action: 'index', id: @today[5].id end %></td><td><%= if !@today[5].nil? then @today[5].place end %></td></th>
    <% elsif !@today[5].nil? && @today[5].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[5].nil? then link_to @today[5].name, action: 'index', id: @today[5].id end %></td><td><%= if !@today[5].nil? then @today[5].place end %></td></th>
    <% elsif !@today[5].nil? && @today[5].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[5].nil? then link_to @today[5].name, action: 'index', id: @today[5].id end %></td><td><%= if !@today[5].nil? then @today[5].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[5].nil? then link_to @today[5].name, action: 'index', id: @today[5].id end %></td><td><%= if !@today[5].nil? then @today[5].place end %></td></tr>
     <% end %>

  <% if !@today[6].nil? && @today[6].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[6].nil? then link_to @today[6].name, action: 'index', id: @today[6].id end %></td><td><%= if !@today[6].nil? then @today[6].place end %></td></th>
    <% elsif !@today[6].nil? && @today[6].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[6].nil? then link_to @today[6].name, action: 'index', id: @today[6].id end %></td><td><%= if !@today[6].nil? then @today[6].place end %></td></th>
    <% elsif !@today[6].nil? && @today[6].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[6].nil? then link_to @today[6].name, action: 'index', id: @today[6].id end %></td><td><%= if !@today[6].nil? then @today[6].place end %></td></th>
    <% elsif !@today[6].nil? && @today[6].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[6].nil? then link_to @today[6].name, action: 'index', id: @today[6].id end %></td><td><%= if !@today[6].nil? then @today[6].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[6].nil? then link_to @today[6].name, action: 'index', id: @today[6].id end %></td><td><%= if !@today[6].nil? then @today[6].place end %></td></tr>
     <% end %>

  <% if !@today[7].nil? && @today[7].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[7].nil? then link_to @today[7].name, action: 'index', id: @today[7].id end %></td><td><%= if !@today[7].nil? then @today[7].place end %></td></th>
    <% elsif !@today[7].nil? && @today[7].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[7].nil? then link_to @today[7].name, action: 'index', id: @today[7].id end %></td><td><%= if !@today[7].nil? then @today[7].place end %></td></th>
    <% elsif !@today[7].nil? && @today[7].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[7].nil? then link_to @today[7].name, action: 'index', id: @today[7].id end %></td><td><%= if !@today[7].nil? then @today[7].place end %></td></th>
    <% elsif !@today[7].nil? && @today[7].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[7].nil? then link_to @today[7].name, action: 'index', id: @today[7].id end %></td><td><%= if !@today[7].nil? then @today[7].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[7].nil? then link_to @today[7].name, action: 'index', id: @today[7].id end %></td><td><%= if !@today[7].nil? then @today[7].place end %></td></tr>
     <% end %>

  <% if !@today[8].nil? && @today[8].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[8].nil? then link_to @today[8].name, action: 'index', id: @today[8].id end %></td><td><%= if !@today[8].nil? then @today[8].place end %></td></th>
    <% elsif !@today[8].nil? && @today[8].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[8].nil? then link_to @today[8].name, action: 'index', id: @today[8].id end %></td><td><%= if !@today[8].nil? then @today[8].place end %></td></th>
    <% elsif !@today[8].nil? && @today[8].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[8].nil? then link_to @today[8].name, action: 'index', id: @today[8].id end %></td><td><%= if !@today[8].nil? then @today[8].place end %></td></th>
    <% elsif !@today[8].nil? && @today[8].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[8].nil? then link_to @today[8].name, action: 'index', id: @today[8].id end %></td><td><%= if !@today[8].nil? then @today[8].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[8].nil? then link_to @today[8].name, action: 'index', id: @today[8].id end %></td><td><%= if !@today[8].nil? then @today[8].place end %></td></tr>
     <% end %>

  <% if !@today[9].nil? && @today[9].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[9].nil? then link_to @today[9].name, action: 'index', id: @today[9].id end %></td><td><%= if !@today[9].nil? then @today[9].place end %></td></th>
    <% elsif !@today[9].nil? && @today[9].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[9].nil? then link_to @today[9].name, action: 'index', id: @today[9].id end %></td><td><%= if !@today[9].nil? then @today[9].place end %></td></th>
    <% elsif !@today[9].nil? && @today[9].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[9].nil? then link_to @today[9].name, action: 'index', id: @today[9].id end %></td><td><%= if !@today[9].nil? then @today[9].place end %></td></th>
    <% elsif !@today[9].nil? && @today[9].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[9].nil? then link_to @today[9].name, action: 'index', id: @today[9].id end %></td><td><%= if !@today[9].nil? then @today[9].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[9].nil? then link_to @today[9].name, action: 'index', id: @today[9].id end %></td><td><%= if !@today[9].nil? then @today[9].place end %></td></tr>
     <% end %>

  <% if !@today[10].nil? && @today[10].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[10].nil? then link_to @today[10].name, action: 'index', id: @today[10].id end %></td><td><%= if !@today[10].nil? then @today[10].place end %></td></th>
    <% elsif !@today[10].nil? && @today[10].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[10].nil? then link_to @today[10].name, action: 'index', id: @today[10].id end %></td><td><%= if !@today[10].nil? then @today[10].place end %></td></th>
    <% elsif !@today[10].nil? && @today[10].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[10].nil? then link_to @today[10].name, action: 'index', id: @today[10].id end %></td><td><%= if !@today[10].nil? then @today[10].place end %></td></th>
    <% elsif !@today[10].nil? && @today[10].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[10].nil? then link_to @today[10].name, action: 'index', id: @today[10].id end %></td><td><%= if !@today[10].nil? then @today[10].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[10].nil? then link_to @today[10].name, action: 'index', id: @today[10].id end %></td><td><%= if !@today[10].nil? then @today[10].place end %></td></tr>
     <% end %>

   <% if !@today[11].nil? && @today[11].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[11].nil? then link_to @today[11].name, action: 'index', id: @today[11].id end %></td><td><%= if !@today[11].nil? then @today[11].place end %></td></th>
    <% elsif !@today[11].nil? && @today[11].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[11].nil? then link_to @today[11].name, action: 'index', id: @today[11].id end %></td><td><%= if !@today[11].nil? then @today[11].place end %></td></th>
    <% elsif !@today[11].nil? && @today[11].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[11].nil? then link_to @today[11].name, action: 'index', id: @today[11].id end %></td><td><%= if !@today[11].nil? then @today[11].place end %></td></th>
    <% elsif !@today[11].nil? && @today[11].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[11].nil? then link_to @today[11].name, action: 'index', id: @today[11].id end %></td><td><%= if !@today[11].nil? then @today[11].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[11].nil? then link_to @today[11].name, action: 'index', id: @today[11].id end %></td><td><%= if !@today[11].nil? then @today[11].place end %></td></tr>
     <% end %>

  <% if !@today[12].nil? && @today[12].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[12].nil? then link_to @today[12].name, action: 'index', id: @today[12].id end %></td><td><%= if !@today[12].nil? then @today[12].place end %></td></th>
    <% elsif !@today[12].nil? && @today[12].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[12].nil? then link_to @today[12].name, action: 'index', id: @today[12].id end %></td><td><%= if !@today[12].nil? then @today[12].place end %></td></th>
    <% elsif !@today[12].nil? && @today[12].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[12].nil? then link_to @today[12].name, action: 'index', id: @today[12].id end %></td><td><%= if !@today[12].nil? then @today[12].place end %></td></th>
    <% elsif !@today[12].nil? && @today[12].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[12].nil? then link_to @today[12].name, action: 'index', id: @today[12].id end %></td><td><%= if !@today[12].nil? then @today[12].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[12].nil? then link_to @today[12].name, action: 'index', id: @today[12].id end %></td><td><%= if !@today[12].nil? then @today[12].place end %></td></tr>
     <% end %>

  <% if !@today[13].nil? && @today[13].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[13].nil? then link_to @today[13].name, action: 'index', id: @today[13].id end %></td><td><%= if !@today[13].nil? then @today[13].place end %></td></th>
    <% elsif !@today[13].nil? && @today[13].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[13].nil? then link_to @today[13].name, action: 'index', id: @today[13].id end %></td><td><%= if !@today[13].nil? then @today[13].place end %></td></th>
    <% elsif !@today[13].nil? && @today[13].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[13].nil? then link_to @today[13].name, action: 'index', id: @today[13].id end %></td><td><%= if !@today[13].nil? then @today[13].place end %></td></th>
    <% elsif !@today[13].nil? && @today[13].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[13].nil? then link_to @today[13].name, action: 'index', id: @today[13].id end %></td><td><%= if !@today[13].nil? then @today[13].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[13].nil? then link_to @today[13].name, action: 'index', id: @today[13].id end %></td><td><%= if !@today[13].nil? then @today[13].place end %></td></tr>
     <% end %>

  <% if !@today[14].nil? && @today[14].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[14].nil? then link_to @today[14].name, action: 'index', id: @today[14].id end %></td><td><%= if !@today[14].nil? then @today[14].place end %></td></th>
    <% elsif !@today[14].nil? && @today[14].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[14].nil? then link_to @today[14].name, action: 'index', id: @today[14].id end %></td><td><%= if !@today[14].nil? then @today[14].place end %></td></th>
    <% elsif !@today[14].nil? && @today[14].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[14].nil? then link_to @today[14].name, action: 'index', id: @today[14].id end %></td><td><%= if !@today[14].nil? then @today[14].place end %></td></th>
    <% elsif !@today[14].nil? && @today[14].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[14].nil? then link_to @today[14].name, action: 'index', id: @today[14].id end %></td><td><%= if !@today[14].nil? then @today[14].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[14].nil? then link_to @today[14].name, action: 'index', id: @today[14].id end %></td><td><%= if !@today[14].nil? then @today[14].place end %></td></tr>
     <% end %>

  <% if !@today[15].nil? && @today[15].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[15].nil? then link_to @today[15].name, action: 'index', id: @today[15].id end %></td><td><%= if !@today[15].nil? then @today[15].place end %></td></th>
    <% elsif !@today[15].nil? && @today[15].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[15].nil? then link_to @today[15].name, action: 'index', id: @today[15].id end %></td><td><%= if !@today[15].nil? then @today[15].place end %></td></th>
    <% elsif !@today[15].nil? && @today[15].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[15].nil? then link_to @today[15].name, action: 'index', id: @today[15].id end %></td><td><%= if !@today[15].nil? then @today[15].place end %></td></th>
    <% elsif !@today[15].nil? && @today[15].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[15].nil? then link_to @today[15].name, action: 'index', id: @today[15].id end %></td><td><%= if !@today[15].nil? then @today[15].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[15].nil? then link_to @today[15].name, action: 'index', id: @today[15].id end %></td><td><%= if !@today[15].nil? then @today[15].place end %></td></tr>
     <% end %>

  <% if !@today[16].nil? && @today[16].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[16].nil? then link_to @today[16].name, action: 'index', id: @today[16].id end %></td><td><%= if !@today[16].nil? then @today[16].place end %></td></th>
    <% elsif !@today[16].nil? && @today[16].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[16].nil? then link_to @today[16].name, action: 'index', id: @today[16].id end %></td><td><%= if !@today[16].nil? then @today[16].place end %></td></th>
    <% elsif !@today[16].nil? && @today[16].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[16].nil? then link_to @today[16].name, action: 'index', id: @today[16].id end %></td><td><%= if !@today[16].nil? then @today[16].place end %></td></th>
    <% elsif !@today[16].nil? && @today[16].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[16].nil? then link_to @today[16].name, action: 'index', id: @today[16].id end %></td><td><%= if !@today[16].nil? then @today[16].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[16].nil? then link_to @today[16].name, action: 'index', id: @today[16].id end %></td><td><%= if !@today[16].nil? then @today[16].place end %></td></tr>
     <% end %>

  <% if !@today[17].nil? && @today[17].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[17].nil? then link_to @today[17].name, action: 'index', id: @today[17].id end %></td><td><%= if !@today[17].nil? then @today[17].place end %></td></th>
    <% elsif !@today[17].nil? && @today[17].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[17].nil? then link_to @today[17].name, action: 'index', id: @today[17].id end %></td><td><%= if !@today[17].nil? then @today[17].place end %></td></th>
    <% elsif !@today[17].nil? && @today[17].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[17].nil? then link_to @today[17].name, action: 'index', id: @today[17].id end %></td><td><%= if !@today[17].nil? then @today[17].place end %></td></th>
    <% elsif !@today[17].nil? && @today[17].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[17].nil? then link_to @today[17].name, action: 'index', id: @today[17].id end %></td><td><%= if !@today[17].nil? then @today[17].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[17].nil? then link_to @today[17].name, action: 'index', id: @today[17].id end %></td><td><%= if !@today[17].nil? then @today[17].place end %></td></tr>
     <% end %>

  <% if !@today[18].nil? && @today[18].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[18].nil? then link_to @today[18].name, action: 'index', id: @today[18].id end %></td><td><%= if !@today[18].nil? then @today[18].place end %></td></th>
    <% elsif !@today[18].nil? && @today[18].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[18].nil? then link_to @today[18].name, action: 'index', id: @today[18].id end %></td><td><%= if !@today[18].nil? then @today[18].place end %></td></th>
    <% elsif !@today[18].nil? && @today[18].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[18].nil? then link_to @today[18].name, action: 'index', id: @today[18].id end %></td><td><%= if !@today[18].nil? then @today[18].place end %></td></th>
    <% elsif !@today[18].nil? && @today[18].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[18].nil? then link_to @today[18].name, action: 'index', id: @today[18].id end %></td><td><%= if !@today[18].nil? then @today[18].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[18].nil? then link_to @today[18].name, action: 'index', id: @today[18].id end %></td><td><%= if !@today[18].nil? then @today[18].place end %></td></tr>
     <% end %>

  <% if !@today[19].nil? && @today[19].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[19].nil? then link_to @today[19].name, action: 'index', id: @today[19].id end %></td><td><%= if !@today[19].nil? then @today[19].place end %></td></th>
    <% elsif !@today[19].nil? && @today[19].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[19].nil? then link_to @today[19].name, action: 'index', id: @today[19].id end %></td><td><%= if !@today[19].nil? then @today[19].place end %></td></th>
    <% elsif !@today[19].nil? && @today[19].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[19].nil? then link_to @today[19].name, action: 'index', id: @today[19].id end %></td><td><%= if !@today[19].nil? then @today[19].place end %></td></th>
    <% elsif !@today[19].nil? && @today[19].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[19].nil? then link_to @today[19].name, action: 'index', id: @today[19].id end %></td><td><%= if !@today[19].nil? then @today[19].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[19].nil? then link_to @today[19].name, action: 'index', id: @today[19].id end %></td><td><%= if !@today[19].nil? then @today[19].place end %></td></tr>
     <% end %>

  <% if !@today[20].nil? && @today[20].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[20].nil? then link_to @today[20].name, action: 'index', id: @today[20].id end %></td><td><%= if !@today[20].nil? then @today[20].place end %></td></th>
    <% elsif !@today[20].nil? && @today[20].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[20].nil? then link_to @today[20].name, action: 'index', id: @today[20].id end %></td><td><%= if !@today[20].nil? then @today[20].place end %></td></th>
    <% elsif !@today[20].nil? && @today[20].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[20].nil? then link_to @today[20].name, action: 'index', id: @today[20].id end %></td><td><%= if !@today[20].nil? then @today[20].place end %></td></th>
    <% elsif !@today[20].nil? && @today[20].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[20].nil? then link_to @today[20].name, action: 'index', id: @today[20].id end %></td><td><%= if !@today[20].nil? then @today[20].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[20].nil? then link_to @today[20].name, action: 'index', id: @today[20].id end %></td><td><%= if !@today[20].nil? then @today[20].place end %></td></tr>
     <% end %>

   <% if !@today[21].nil? && @today[21].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[21].nil? then link_to @today[21].name, action: 'index', id: @today[21].id end %></td><td><%= if !@today[21].nil? then @today[21].place end %></td></th>
    <% elsif !@today[21].nil? && @today[21].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[21].nil? then link_to @today[21].name, action: 'index', id: @today[21].id end %></td><td><%= if !@today[21].nil? then @today[21].place end %></td></th>
    <% elsif !@today[21].nil? && @today[21].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[21].nil? then link_to @today[21].name, action: 'index', id: @today[21].id end %></td><td><%= if !@today[21].nil? then @today[21].place end %></td></th>
    <% elsif !@today[21].nil? && @today[21].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[21].nil? then link_to @today[21].name, action: 'index', id: @today[21].id end %></td><td><%= if !@today[21].nil? then @today[21].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[21].nil? then link_to @today[21].name, action: 'index', id: @today[21].id end %></td><td><%= if !@today[21].nil? then @today[21].place end %></td></tr>
     <% end %>

  <% if !@today[22].nil? && @today[22].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[22].nil? then link_to @today[22].name, action: 'index', id: @today[22].id end %></td><td><%= if !@today[22].nil? then @today[22].place end %></td></th>
    <% elsif !@today[22].nil? && @today[22].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[22].nil? then link_to @today[22].name, action: 'index', id: @today[22].id end %></td><td><%= if !@today[22].nil? then @today[22].place end %></td></th>
    <% elsif !@today[22].nil? && @today[22].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[22].nil? then link_to @today[22].name, action: 'index', id: @today[22].id end %></td><td><%= if !@today[22].nil? then @today[22].place end %></td></th>
    <% elsif !@today[22].nil? && @today[22].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[22].nil? then link_to @today[22].name, action: 'index', id: @today[22].id end %></td><td><%= if !@today[22].nil? then @today[22].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[22].nil? then link_to @today[22].name, action: 'index', id: @today[22].id end %></td><td><%= if !@today[22].nil? then @today[22].place end %></td></tr>
     <% end %>

  <% if !@today[23].nil? && @today[23].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@today[23].nil? then link_to @today[23].name, action: 'index', id: @today[23].id end %></td><td><%= if !@today[23].nil? then @today[23].place end %></td></th>
    <% elsif !@today[23].nil? && @today[23].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@today[23].nil? then link_to @today[23].name, action: 'index', id: @today[23].id end %></td><td><%= if !@today[23].nil? then @today[23].place end %></td></th>
    <% elsif !@today[23].nil? && @today[23].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@today[23].nil? then link_to @today[23].name, action: 'index', id: @today[23].id end %></td><td><%= if !@today[23].nil? then @today[23].place end %></td></th>
    <% elsif !@today[23].nil? && @today[23].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@today[23].nil? then link_to @today[23].name, action: 'index', id: @today[23].id end %></td><td><%= if !@today[23].nil? then @today[23].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@today[23].nil? then link_to @today[23].name, action: 'index', id: @today[23].id end %></td><td><%= if !@today[23].nil? then @today[23].place end %></td></tr>
     <% end %>

  </tbody>
  </head>
</table>

<table border width=160, height=1000>
<head>
  <caption><%= I18n.localize(Date.tomorrow, :format => :short) %></caption>
  <thead>
  <tr>
<!-- <<<<<<< HEAD
    <tr height = "38"><th>予定</th><th>場所</th></tr>
    </tr>
  </thead>
  <tbody>
    <tr height = "38"><td><%= if !@tomorrow[0].nil? then link_to @tomorrow[0].name, action: 'index', id: @tomorrow[0].id end %></td><td><%= if !@tomorrow[0].nil? then @tomorrow[0].place else "\n" end %></td></tr>
    <tr class="odd"  height = "38"><td><%= if !@tomorrow[1].nil? then link_to @tomorrow[1].name, action: 'index', id: @tomorrow[1].id end %></td><td><%= if !@tomorrow[1].nil? then @tomorrow[1].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[2].nil? then link_to @tomorrow[2].name, action: 'index', id: @tomorrow[2].id end %></td><td><%= if !@tomorrow[2].nil? then @tomorrow[2].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@tomorrow[3].nil? then link_to @tomorrow[3].name, action: 'index', id: @tomorrow[3].id end %></td><td><%= if !@tomorrow[3].nil? then @tomorrow[3].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[4].nil? then link_to @tomorrow[4].name, action: 'index', id: @tomorrow[3].id end %></td><td><%= if !@tomorrow[4].nil? then @tomorrow[4].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[5].nil? then link_to @tomorrow[5].name, action: 'index', id: @tomorrow[5].id end %></td><td><%= if !@tomorrow[5].nil? then @tomorrow[5].place end %></td></tr>
    <tr height = "38" class="odd"><td><%= if !@tomorrow[6].nil? then link_to @tomorrow[6].name, action: 'index', id: @tomorrow[6].id end %></td><td><%= if !@tomorrow[6].nil? then @tomorrow[6].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[7].nil? then link_to @tomorrow[7].name, action: 'index', id: @tomorrow[7].id end %></td><td><%= if !@tomorrow[7].nil? then @tomorrow[7].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@tomorrow[8].nil? then link_to @tomorrow[8].name, action: 'index', id: @tomorrow[8].id end %></td><td><%= if !@tomorrow[8].nil? then @tomorrow[8].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[9].nil? then link_to @tomorrow[9].name, action: 'index', id: @tomorrow[9].id end %></td><td><%= if !@tomorrow[9].nil? then @tomorrow[9].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[10].nil? then link_to @tomorrow[10].name, action: 'index', id: @tomorrow[10].id end %></td><td><%= if !@tomorrow[10].nil? then @tomorrow[10].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@tomorrow[11].nil? then link_to @tomorrow[11].name, action: 'index', id: @tomorrow[11].id end %></td><td><%= if !@tomorrow[11].nil? then @tomorrow[11].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[12].nil? then link_to @tomorrow[12].name, action: 'index', id: @tomorrow[12].id end %></td><td><%= if !@tomorrow[12].nil? then @tomorrow[12].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@tomorrow[13].nil? then link_to @tomorrow[13].name, action: 'index', id: @tomorrow[13].id end %></td><td><%= if !@tomorrow[13].nil? then @tomorrow[13].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[14].nil? then link_to @tomorrow[14].name, action: 'index', id: @tomorrow[14].id end %></td><td><%= if !@tomorrow[14].nil? then @tomorrow[14].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[15].nil? then link_to @tomorrow[15].name, action: 'index', id: @tomorrow[15].id end %></td><td><%= if !@tomorrow[15].nil? then @tomorrow[15].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@tomorrow[16].nil? then link_to @tomorrow[16].name, action: 'index', id: @tomorrow[16].id end %></td><td><%= if !@tomorrow[16].nil? then @tomorrow[16].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[17].nil? then link_to @tomorrow[17].name, action: 'index', id: @tomorrow[17].id end %></td><td><%= if !@tomorrow[17].nil? then @tomorrow[17].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@tomorrow[18].nil? then link_to @tomorrow[18].name, action: 'index', id: @tomorrow[18].id end %></td><td><%= if !@tomorrow[18].nil? then @tomorrow[18].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[19].nil? then link_to @tomorrow[19].name, action: 'index', id: @tomorrow[19].id end %></td><td><%= if !@tomorrow[19].nil? then @tomorrow[19].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[20].nil? then link_to @tomorrow[20].name, action: 'index', id: @tomorrow[20].id end %></td><td><%= if !@tomorrow[20].nil? then @tomorrow[20].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@tomorrow[21].nil? then link_to @tomorrow[21].name, action: 'index', id: @tomorrow[21].id end %></td><td><%= if !@tomorrow[21].nil? then @tomorrow[21].place end %></td></tr>
    <tr height = "38"><td><%= if !@tomorrow[22].nil? then link_to @tomorrow[22].name, action: 'index', id: @tomorrow[22].id end %></td><td><%= if !@tomorrow[22].nil? then @tomorrow[22].place end %></td></tr>
    <tr class="odd" height = "38"><td><%= if !@tomorrow[23].nil? then link_to @tomorrow[23].name, action: 'index', id: @tomorrow[23].id end %></td><td><%= if !@tomorrow[23].nil? then @tomorrow[23].place end %></td></tr>
======= -->
    <tr height = "38" bgcolor="#c0c0c0"><th>予定</th><th>場所</th></tr>
    </tr>
  </thead>
  <tbody>
   <% if !@tomorrow[0].nil? && @tomorrow[0].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[0].nil? then link_to @tomorrow[0].name, action: 'index', id: @tomorrow[0].id end %></td><td><%= if !@tomorrow[0].nil? then @tomorrow[0].place end %></td></th>
    <% elsif !@tomorrow[0].nil? && @tomorrow[0].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[0].nil? then link_to @tomorrow[0].name, action: 'index', id: @tomorrow[0].id end %></td><td><%= if !@tomorrow[0].nil? then @tomorrow[0].place end %></td></th>
    <% elsif !@tomorrow[0].nil? && @tomorrow[0].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[0].nil? then link_to @tomorrow[0].name, action: 'index', id: @tomorrow[0].id end %></td><td><%= if !@tomorrow[0].nil? then @tomorrow[0].place end %></td></th>
    <% elsif !@tomorrow[0].nil? && @tomorrow[0].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[0].nil? then link_to @tomorrow[0].name, action: 'index', id: @tomorrow[0].id end %></td><td><%= if !@tomorrow[0].nil? then @tomorrow[0].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[0].nil? then link_to @tomorrow[0].name, action: 'index', id: @tomorrow[0].id end %></td><td><%= if !@tomorrow[0].nil? then @tomorrow[0].place end %></td></tr>
     <% end %>

   <% if !@tomorrow[1].nil? && @tomorrow[1].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[1].nil? then link_to @tomorrow[1].name, action: 'index', id: @tomorrow[1].id end %></td><td><%= if !@tomorrow[1].nil? then @tomorrow[1].place end %></td></th>
    <% elsif !@tomorrow[1].nil? && @tomorrow[1].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[1].nil? then link_to @tomorrow[1].name, action: 'index', id: @tomorrow[1].id end %></td><td><%= if !@tomorrow[1].nil? then @tomorrow[1].place end %></td></th>
    <% elsif !@tomorrow[1].nil? && @tomorrow[1].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[1].nil? then link_to @tomorrow[1].name, action: 'index', id: @tomorrow[1].id end %></td><td><%= if !@tomorrow[1].nil? then @tomorrow[1].place end %></td></th>
    <% elsif !@tomorrow[1].nil? && @tomorrow[1].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[1].nil? then link_to @tomorrow[1].name, action: 'index', id: @tomorrow[1].id end %></td><td><%= if !@tomorrow[1].nil? then @tomorrow[1].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[1].nil? then link_to @tomorrow[1].name, action: 'index', id: @tomorrow[1].id end %></td><td><%= if !@tomorrow[1].nil? then @tomorrow[1].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[2].nil? && @tomorrow[2].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[2].nil? then link_to @tomorrow[2].name, action: 'index', id: @tomorrow[2].id end %></td><td><%= if !@tomorrow[2].nil? then @tomorrow[2].place end %></td></th>
    <% elsif !@tomorrow[2].nil? && @tomorrow[2].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[2].nil? then link_to @tomorrow[2].name, action: 'index', id: @tomorrow[2].id end %></td><td><%= if !@tomorrow[2].nil? then @tomorrow[2].place end %></td></th>
    <% elsif !@tomorrow[2].nil? && @tomorrow[2].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[2].nil? then link_to @tomorrow[2].name, action: 'index', id: @tomorrow[2].id end %></td><td><%= if !@tomorrow[2].nil? then @tomorrow[2].place end %></td></th>
    <% elsif !@tomorrow[2].nil? && @tomorrow[2].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[2].nil? then link_to @tomorrow[2].name, action: 'index', id: @tomorrow[2].id end %></td><td><%= if !@tomorrow[2].nil? then @tomorrow[2].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[2].nil? then link_to @tomorrow[2].name, action: 'index', id: @tomorrow[2].id end %></td><td><%= if !@tomorrow[2].nil? then @tomorrow[2].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[3].nil? && @tomorrow[3].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[3].nil? then link_to @tomorrow[3].name, action: 'index', id: @tomorrow[3].id end %></td><td><%= if !@tomorrow[3].nil? then @tomorrow[3].place end %></td></th>
    <% elsif !@tomorrow[3].nil? && @tomorrow[3].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[3].nil? then link_to @tomorrow[3].name, action: 'index', id: @tomorrow[3].id end %></td><td><%= if !@tomorrow[3].nil? then @tomorrow[3].place end %></td></th>
    <% elsif !@tomorrow[3].nil? && @tomorrow[3].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[3].nil? then link_to @tomorrow[3].name, action: 'index', id: @tomorrow[3].id end %></td><td><%= if !@tomorrow[3].nil? then @tomorrow[3].place end %></td></th>
    <% elsif !@tomorrow[3].nil? && @tomorrow[3].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[3].nil? then link_to @tomorrow[3].name, action: 'index', id: @tomorrow[3].id end %></td><td><%= if !@tomorrow[3].nil? then @tomorrow[3].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[3].nil? then link_to @tomorrow[3].name, action: 'index', id: @tomorrow[3].id end %></td><td><%= if !@tomorrow[3].nil? then @tomorrow[3].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[4].nil? && @tomorrow[4].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[4].nil? then link_to @tomorrow[4].name, action: 'index', id: @tomorrow[4].id end %></td><td><%= if !@tomorrow[4].nil? then @tomorrow[4].place end %></td></th>
    <% elsif !@tomorrow[4].nil? && @tomorrow[4].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[4].nil? then link_to @tomorrow[4].name, action: 'index', id: @tomorrow[4].id end %></td><td><%= if !@tomorrow[4].nil? then @tomorrow[4].place end %></td></th>
    <% elsif !@tomorrow[4].nil? && @tomorrow[4].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[4].nil? then link_to @tomorrow[4].name, action: 'index', id: @tomorrow[4].id end %></td><td><%= if !@tomorrow[4].nil? then @tomorrow[4].place end %></td></th>
    <% elsif !@tomorrow[4].nil? && @tomorrow[4].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[4].nil? then link_to @tomorrow[4].name, action: 'index', id: @tomorrow[4].id end %></td><td><%= if !@tomorrow[4].nil? then @tomorrow[4].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[4].nil? then link_to @tomorrow[4].name, action: 'index', id: @tomorrow[4].id end %></td><td><%= if !@tomorrow[4].nil? then @tomorrow[4].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[5].nil? && @tomorrow[5].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[5].nil? then link_to @tomorrow[5].name, action: 'index', id: @tomorrow[5].id end %></td><td><%= if !@tomorrow[5].nil? then @tomorrow[5].place end %></td></th>
    <% elsif !@tomorrow[5].nil? && @tomorrow[5].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[5].nil? then link_to @tomorrow[5].name, action: 'index', id: @tomorrow[5].id end %></td><td><%= if !@tomorrow[5].nil? then @tomorrow[5].place end %></td></th>
    <% elsif !@tomorrow[5].nil? && @tomorrow[5].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[5].nil? then link_to @tomorrow[5].name, action: 'index', id: @tomorrow[5].id end %></td><td><%= if !@tomorrow[5].nil? then @tomorrow[5].place end %></td></th>
    <% elsif !@tomorrow[5].nil? && @tomorrow[5].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[5].nil? then link_to @tomorrow[5].name, action: 'index', id: @tomorrow[5].id end %></td><td><%= if !@tomorrow[5].nil? then @tomorrow[5].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[5].nil? then link_to @tomorrow[5].name, action: 'index', id: @tomorrow[5].id end %></td><td><%= if !@tomorrow[5].nil? then @tomorrow[5].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[6].nil? && @tomorrow[6].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[6].nil? then link_to @tomorrow[6].name, action: 'index', id: @tomorrow[6].id end %></td><td><%= if !@tomorrow[6].nil? then @tomorrow[6].place end %></td></th>
    <% elsif !@tomorrow[6].nil? && @tomorrow[6].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[6].nil? then link_to @tomorrow[6].name, action: 'index', id: @tomorrow[6].id end %></td><td><%= if !@tomorrow[6].nil? then @tomorrow[6].place end %></td></th>
    <% elsif !@tomorrow[6].nil? && @tomorrow[6].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[6].nil? then link_to @tomorrow[6].name, action: 'index', id: @tomorrow[6].id end %></td><td><%= if !@tomorrow[6].nil? then @tomorrow[6].place end %></td></th>
    <% elsif !@tomorrow[6].nil? && @tomorrow[6].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[6].nil? then link_to @tomorrow[6].name, action: 'index', id: @tomorrow[6].id end %></td><td><%= if !@tomorrow[6].nil? then @tomorrow[6].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[6].nil? then link_to @tomorrow[6].name, action: 'index', id: @tomorrow[6].id end %></td><td><%= if !@tomorrow[6].nil? then @tomorrow[6].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[7].nil? && @tomorrow[7].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[7].nil? then link_to @tomorrow[7].name, action: 'index', id: @tomorrow[7].id end %></td><td><%= if !@tomorrow[7].nil? then @tomorrow[7].place end %></td></th>
    <% elsif !@tomorrow[7].nil? && @tomorrow[7].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[7].nil? then link_to @tomorrow[7].name, action: 'index', id: @tomorrow[7].id end %></td><td><%= if !@tomorrow[7].nil? then @tomorrow[7].place end %></td></th>
    <% elsif !@tomorrow[7].nil? && @tomorrow[7].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[7].nil? then link_to @tomorrow[7].name, action: 'index', id: @tomorrow[7].id end %></td><td><%= if !@tomorrow[7].nil? then @tomorrow[7].place end %></td></th>
    <% elsif !@tomorrow[7].nil? && @tomorrow[7].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[7].nil? then link_to @tomorrow[7].name, action: 'index', id: @tomorrow[7].id end %></td><td><%= if !@tomorrow[7].nil? then @tomorrow[7].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[7].nil? then link_to @tomorrow[7].name, action: 'index', id: @tomorrow[7].id end %></td><td><%= if !@tomorrow[7].nil? then @tomorrow[7].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[8].nil? && @tomorrow[8].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[8].nil? then link_to @tomorrow[8].name, action: 'index', id: @tomorrow[8].id end %></td><td><%= if !@tomorrow[8].nil? then @tomorrow[8].place end %></td></th>
    <% elsif !@tomorrow[8].nil? && @tomorrow[8].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[8].nil? then link_to @tomorrow[8].name, action: 'index', id: @tomorrow[8].id end %></td><td><%= if !@tomorrow[8].nil? then @tomorrow[8].place end %></td></th>
    <% elsif !@tomorrow[8].nil? && @tomorrow[8].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[8].nil? then link_to @tomorrow[8].name, action: 'index', id: @tomorrow[8].id end %></td><td><%= if !@tomorrow[8].nil? then @tomorrow[8].place end %></td></th>
    <% elsif !@tomorrow[8].nil? && @tomorrow[8].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[8].nil? then link_to @tomorrow[8].name, action: 'index', id: @tomorrow[8].id end %></td><td><%= if !@tomorrow[8].nil? then @tomorrow[8].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[8].nil? then link_to @tomorrow[8].name, action: 'index', id: @tomorrow[8].id end %></td><td><%= if !@tomorrow[8].nil? then @tomorrow[8].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[9].nil? && @tomorrow[9].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[9].nil? then link_to @tomorrow[9].name, action: 'index', id: @tomorrow[9].id end %></td><td><%= if !@tomorrow[9].nil? then @tomorrow[9].place end %></td></th>
    <% elsif !@tomorrow[9].nil? && @tomorrow[9].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[9].nil? then link_to @tomorrow[9].name, action: 'index', id: @tomorrow[9].id end %></td><td><%= if !@tomorrow[9].nil? then @tomorrow[9].place end %></td></th>
    <% elsif !@tomorrow[9].nil? && @tomorrow[9].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[9].nil? then link_to @tomorrow[9].name, action: 'index', id: @tomorrow[9].id end %></td><td><%= if !@tomorrow[9].nil? then @tomorrow[9].place end %></td></th>
    <% elsif !@tomorrow[9].nil? && @tomorrow[9].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[9].nil? then link_to @tomorrow[9].name, action: 'index', id: @tomorrow[9].id end %></td><td><%= if !@tomorrow[9].nil? then @tomorrow[9].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[9].nil? then link_to @tomorrow[9].name, action: 'index', id: @tomorrow[9].id end %></td><td><%= if !@tomorrow[9].nil? then @tomorrow[9].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[10].nil? && @tomorrow[10].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[10].nil? then link_to @tomorrow[10].name, action: 'index', id: @tomorrow[10].id end %></td><td><%= if !@tomorrow[10].nil? then @tomorrow[10].place end %></td></th>
    <% elsif !@tomorrow[10].nil? && @tomorrow[10].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[10].nil? then link_to @tomorrow[10].name, action: 'index', id: @tomorrow[10].id end %></td><td><%= if !@tomorrow[10].nil? then @tomorrow[10].place end %></td></th>
    <% elsif !@tomorrow[10].nil? && @tomorrow[10].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[10].nil? then link_to @tomorrow[10].name, action: 'index', id: @tomorrow[10].id end %></td><td><%= if !@tomorrow[10].nil? then @tomorrow[10].place end %></td></th>
    <% elsif !@tomorrow[10].nil? && @tomorrow[10].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[10].nil? then link_to @tomorrow[10].name, action: 'index', id: @tomorrow[10].id end %></td><td><%= if !@tomorrow[10].nil? then @tomorrow[10].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[10].nil? then link_to @tomorrow[10].name, action: 'index', id: @tomorrow[10].id end %></td><td><%= if !@tomorrow[10].nil? then @tomorrow[10].place end %></td></tr>
     <% end %>

   <% if !@tomorrow[11].nil? && @tomorrow[11].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[11].nil? then link_to @tomorrow[11].name, action: 'index', id: @tomorrow[11].id end %></td><td><%= if !@tomorrow[11].nil? then @tomorrow[11].place end %></td></th>
    <% elsif !@tomorrow[11].nil? && @tomorrow[11].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[11].nil? then link_to @tomorrow[11].name, action: 'index', id: @tomorrow[11].id end %></td><td><%= if !@tomorrow[11].nil? then @tomorrow[11].place end %></td></th>
    <% elsif !@tomorrow[11].nil? && @tomorrow[11].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[11].nil? then link_to @tomorrow[11].name, action: 'index', id: @tomorrow[11].id end %></td><td><%= if !@tomorrow[11].nil? then @tomorrow[11].place end %></td></th>
    <% elsif !@tomorrow[11].nil? && @tomorrow[11].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[11].nil? then link_to @tomorrow[11].name, action: 'index', id: @tomorrow[11].id end %></td><td><%= if !@tomorrow[11].nil? then @tomorrow[11].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[11].nil? then link_to @tomorrow[11].name, action: 'index', id: @tomorrow[11].id end %></td><td><%= if !@tomorrow[11].nil? then @tomorrow[11].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[12].nil? && @tomorrow[12].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[12].nil? then link_to @tomorrow[12].name, action: 'index', id: @tomorrow[12].id end %></td><td><%= if !@tomorrow[12].nil? then @tomorrow[12].place end %></td></th>
    <% elsif !@tomorrow[12].nil? && @tomorrow[12].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[12].nil? then link_to @tomorrow[12].name, action: 'index', id: @tomorrow[12].id end %></td><td><%= if !@tomorrow[12].nil? then @tomorrow[12].place end %></td></th>
    <% elsif !@tomorrow[12].nil? && @tomorrow[12].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[12].nil? then link_to @tomorrow[12].name, action: 'index', id: @tomorrow[12].id end %></td><td><%= if !@tomorrow[12].nil? then @tomorrow[12].place end %></td></th>
    <% elsif !@tomorrow[12].nil? && @tomorrow[12].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[12].nil? then link_to @tomorrow[12].name, action: 'index', id: @tomorrow[12].id end %></td><td><%= if !@tomorrow[12].nil? then @tomorrow[12].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[12].nil? then link_to @tomorrow[12].name, action: 'index', id: @tomorrow[12].id end %></td><td><%= if !@tomorrow[12].nil? then @tomorrow[12].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[13].nil? && @tomorrow[13].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[13].nil? then link_to @tomorrow[13].name, action: 'index', id: @tomorrow[13].id end %></td><td><%= if !@tomorrow[13].nil? then @tomorrow[13].place end %></td></th>
    <% elsif !@tomorrow[13].nil? && @tomorrow[13].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[13].nil? then link_to @tomorrow[13].name, action: 'index', id: @tomorrow[13].id end %></td><td><%= if !@tomorrow[13].nil? then @tomorrow[13].place end %></td></th>
    <% elsif !@tomorrow[13].nil? && @tomorrow[13].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[13].nil? then link_to @tomorrow[13].name, action: 'index', id: @tomorrow[13].id end %></td><td><%= if !@tomorrow[13].nil? then @tomorrow[13].place end %></td></th>
    <% elsif !@tomorrow[13].nil? && @tomorrow[13].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[13].nil? then link_to @tomorrow[13].name, action: 'index', id: @tomorrow[13].id end %></td><td><%= if !@tomorrow[13].nil? then @tomorrow[13].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[13].nil? then link_to @tomorrow[13].name, action: 'index', id: @tomorrow[13].id end %></td><td><%= if !@tomorrow[13].nil? then @tomorrow[13].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[14].nil? && @tomorrow[14].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[14].nil? then link_to @tomorrow[14].name, action: 'index', id: @tomorrow[14].id end %></td><td><%= if !@tomorrow[14].nil? then @tomorrow[14].place end %></td></th>
    <% elsif !@tomorrow[14].nil? && @tomorrow[14].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[14].nil? then link_to @tomorrow[14].name, action: 'index', id: @tomorrow[14].id end %></td><td><%= if !@tomorrow[14].nil? then @tomorrow[14].place end %></td></th>
    <% elsif !@tomorrow[14].nil? && @tomorrow[14].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[14].nil? then link_to @tomorrow[14].name, action: 'index', id: @tomorrow[14].id end %></td><td><%= if !@tomorrow[14].nil? then @tomorrow[14].place end %></td></th>
    <% elsif !@tomorrow[14].nil? && @tomorrow[14].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[14].nil? then link_to @tomorrow[14].name, action: 'index', id: @tomorrow[14].id end %></td><td><%= if !@tomorrow[14].nil? then @tomorrow[14].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[14].nil? then link_to @tomorrow[14].name, action: 'index', id: @tomorrow[14].id end %></td><td><%= if !@tomorrow[14].nil? then @tomorrow[14].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[15].nil? && @tomorrow[15].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[15].nil? then link_to @tomorrow[15].name, action: 'index', id: @tomorrow[15].id end %></td><td><%= if !@tomorrow[15].nil? then @tomorrow[15].place end %></td></th>
    <% elsif !@tomorrow[15].nil? && @tomorrow[15].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[15].nil? then link_to @tomorrow[15].name, action: 'index', id: @tomorrow[15].id end %></td><td><%= if !@tomorrow[15].nil? then @tomorrow[15].place end %></td></th>
    <% elsif !@tomorrow[15].nil? && @tomorrow[15].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[15].nil? then link_to @tomorrow[15].name, action: 'index', id: @tomorrow[15].id end %></td><td><%= if !@tomorrow[15].nil? then @tomorrow[15].place end %></td></th>
    <% elsif !@tomorrow[15].nil? && @tomorrow[15].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[15].nil? then link_to @tomorrow[15].name, action: 'index', id: @tomorrow[15].id end %></td><td><%= if !@tomorrow[15].nil? then @tomorrow[15].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[15].nil? then link_to @tomorrow[15].name, action: 'index', id: @tomorrow[15].id end %></td><td><%= if !@tomorrow[15].nil? then @tomorrow[15].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[16].nil? && @tomorrow[16].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[16].nil? then link_to @tomorrow[16].name, action: 'index', id: @tomorrow[16].id end %></td><td><%= if !@tomorrow[16].nil? then @tomorrow[16].place end %></td></th>
    <% elsif !@tomorrow[16].nil? && @tomorrow[16].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[16].nil? then link_to @tomorrow[16].name, action: 'index', id: @tomorrow[16].id end %></td><td><%= if !@tomorrow[16].nil? then @tomorrow[16].place end %></td></th>
    <% elsif !@tomorrow[16].nil? && @tomorrow[16].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[16].nil? then link_to @tomorrow[16].name, action: 'index', id: @tomorrow[16].id end %></td><td><%= if !@tomorrow[16].nil? then @tomorrow[16].place end %></td></th>
    <% elsif !@tomorrow[16].nil? && @tomorrow[16].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[16].nil? then link_to @tomorrow[16].name, action: 'index', id: @tomorrow[16].id end %></td><td><%= if !@tomorrow[16].nil? then @tomorrow[16].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[16].nil? then link_to @tomorrow[16].name, action: 'index', id: @tomorrow[16].id end %></td><td><%= if !@tomorrow[16].nil? then @tomorrow[16].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[17].nil? && @tomorrow[17].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[17].nil? then link_to @tomorrow[17].name, action: 'index', id: @tomorrow[17].id end %></td><td><%= if !@tomorrow[17].nil? then @tomorrow[17].place end %></td></th>
    <% elsif !@tomorrow[17].nil? && @tomorrow[17].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[17].nil? then link_to @tomorrow[17].name, action: 'index', id: @tomorrow[17].id end %></td><td><%= if !@tomorrow[17].nil? then @tomorrow[17].place end %></td></th>
    <% elsif !@tomorrow[17].nil? && @tomorrow[17].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[17].nil? then link_to @tomorrow[17].name, action: 'index', id: @tomorrow[17].id end %></td><td><%= if !@tomorrow[17].nil? then @tomorrow[17].place end %></td></th>
    <% elsif !@tomorrow[17].nil? && @tomorrow[17].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[17].nil? then link_to @tomorrow[17].name, action: 'index', id: @tomorrow[17].id end %></td><td><%= if !@tomorrow[17].nil? then @tomorrow[17].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[17].nil? then link_to @tomorrow[17].name, action: 'index', id: @tomorrow[17].id end %></td><td><%= if !@tomorrow[17].nil? then @tomorrow[17].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[18].nil? && @tomorrow[18].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[18].nil? then link_to @tomorrow[18].name, action: 'index', id: @tomorrow[18].id end %></td><td><%= if !@tomorrow[18].nil? then @tomorrow[18].place end %></td></th>
    <% elsif !@tomorrow[18].nil? && @tomorrow[18].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[18].nil? then link_to @tomorrow[18].name, action: 'index', id: @tomorrow[18].id end %></td><td><%= if !@tomorrow[18].nil? then @tomorrow[18].place end %></td></th>
    <% elsif !@tomorrow[18].nil? && @tomorrow[18].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[18].nil? then link_to @tomorrow[18].name, action: 'index', id: @tomorrow[18].id end %></td><td><%= if !@tomorrow[18].nil? then @tomorrow[18].place end %></td></th>
    <% elsif !@tomorrow[18].nil? && @tomorrow[18].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[18].nil? then link_to @tomorrow[18].name, action: 'index', id: @tomorrow[18].id end %></td><td><%= if !@tomorrow[18].nil? then @tomorrow[18].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[18].nil? then link_to @tomorrow[18].name, action: 'index', id: @tomorrow[18].id end %></td><td><%= if !@tomorrow[18].nil? then @tomorrow[18].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[19].nil? && @tomorrow[19].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[19].nil? then link_to @tomorrow[19].name, action: 'index', id: @tomorrow[19].id end %></td><td><%= if !@tomorrow[19].nil? then @tomorrow[19].place end %></td></th>
    <% elsif !@tomorrow[19].nil? && @tomorrow[19].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[19].nil? then link_to @tomorrow[19].name, action: 'index', id: @tomorrow[19].id end %></td><td><%= if !@tomorrow[19].nil? then @tomorrow[19].place end %></td></th>
    <% elsif !@tomorrow[19].nil? && @tomorrow[19].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[19].nil? then link_to @tomorrow[19].name, action: 'index', id: @tomorrow[19].id end %></td><td><%= if !@tomorrow[19].nil? then @tomorrow[19].place end %></td></th>
    <% elsif !@tomorrow[19].nil? && @tomorrow[19].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[19].nil? then link_to @tomorrow[19].name, action: 'index', id: @tomorrow[19].id end %></td><td><%= if !@tomorrow[19].nil? then @tomorrow[19].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[19].nil? then link_to @tomorrow[19].name, action: 'index', id: @tomorrow[19].id end %></td><td><%= if !@tomorrow[19].nil? then @tomorrow[19].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[20].nil? && @tomorrow[20].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[20].nil? then link_to @tomorrow[20].name, action: 'index', id: @tomorrow[20].id end %></td><td><%= if !@tomorrow[20].nil? then @tomorrow[20].place end %></td></th>
    <% elsif !@tomorrow[20].nil? && @tomorrow[20].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[20].nil? then link_to @tomorrow[20].name, action: 'index', id: @tomorrow[20].id end %></td><td><%= if !@tomorrow[20].nil? then @tomorrow[20].place end %></td></th>
    <% elsif !@tomorrow[20].nil? && @tomorrow[20].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[20].nil? then link_to @tomorrow[20].name, action: 'index', id: @tomorrow[20].id end %></td><td><%= if !@tomorrow[20].nil? then @tomorrow[20].place end %></td></th>
    <% elsif !@tomorrow[20].nil? && @tomorrow[20].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[20].nil? then link_to @tomorrow[20].name, action: 'index', id: @tomorrow[20].id end %></td><td><%= if !@tomorrow[20].nil? then @tomorrow[20].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[20].nil? then link_to @tomorrow[20].name, action: 'index', id: @tomorrow[20].id end %></td><td><%= if !@tomorrow[20].nil? then @tomorrow[20].place end %></td></tr>
     <% end %>

   <% if !@tomorrow[21].nil? && @tomorrow[21].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[21].nil? then link_to @tomorrow[21].name, action: 'index', id: @tomorrow[21].id end %></td><td><%= if !@tomorrow[21].nil? then @tomorrow[21].place end %></td></th>
    <% elsif !@tomorrow[21].nil? && @tomorrow[21].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[21].nil? then link_to @tomorrow[21].name, action: 'index', id: @tomorrow[21].id end %></td><td><%= if !@tomorrow[21].nil? then @tomorrow[21].place end %></td></th>
    <% elsif !@tomorrow[21].nil? && @tomorrow[21].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[21].nil? then link_to @tomorrow[21].name, action: 'index', id: @tomorrow[21].id end %></td><td><%= if !@tomorrow[21].nil? then @tomorrow[21].place end %></td></th>
    <% elsif !@tomorrow[21].nil? && @tomorrow[21].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[21].nil? then link_to @tomorrow[21].name, action: 'index', id: @tomorrow[21].id end %></td><td><%= if !@tomorrow[21].nil? then @tomorrow[21].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[21].nil? then link_to @tomorrow[21].name, action: 'index', id: @tomorrow[21].id end %></td><td><%= if !@tomorrow[21].nil? then @tomorrow[21].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[22].nil? && @tomorrow[22].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[22].nil? then link_to @tomorrow[22].name, action: 'index', id: @tomorrow[22].id end %></td><td><%= if !@tomorrow[22].nil? then @tomorrow[22].place end %></td></th>
    <% elsif !@tomorrow[22].nil? && @tomorrow[22].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[22].nil? then link_to @tomorrow[22].name, action: 'index', id: @tomorrow[22].id end %></td><td><%= if !@tomorrow[22].nil? then @tomorrow[22].place end %></td></th>
    <% elsif !@tomorrow[22].nil? && @tomorrow[22].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[22].nil? then link_to @tomorrow[22].name, action: 'index', id: @tomorrow[22].id end %></td><td><%= if !@tomorrow[22].nil? then @tomorrow[22].place end %></td></th>
    <% elsif !@tomorrow[22].nil? && @tomorrow[22].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[22].nil? then link_to @tomorrow[22].name, action: 'index', id: @tomorrow[22].id end %></td><td><%= if !@tomorrow[22].nil? then @tomorrow[22].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[22].nil? then link_to @tomorrow[22].name, action: 'index', id: @tomorrow[22].id end %></td><td><%= if !@tomorrow[22].nil? then @tomorrow[22].place end %></td></tr>
     <% end %>

  <% if !@tomorrow[23].nil? && @tomorrow[23].category == 1 %>
    <tr height = "38" bgcolor="#32CD32"><td><%= if !@tomorrow[23].nil? then link_to @tomorrow[23].name, action: 'index', id: @tomorrow[23].id end %></td><td><%= if !@tomorrow[23].nil? then @tomorrow[23].place end %></td></th>
    <% elsif !@tomorrow[23].nil? && @tomorrow[23].category == 2 %>
      <tr height = "38" bgcolor="#FF6347"><td><%= if !@tomorrow[23].nil? then link_to @tomorrow[23].name, action: 'index', id: @tomorrow[23].id end %></td><td><%= if !@tomorrow[23].nil? then @tomorrow[23].place end %></td></th>
    <% elsif !@tomorrow[23].nil? && @tomorrow[23].category == 3 %>
      <tr height = "38" bgcolor="#4682B4"><td><%= if !@tomorrow[23].nil? then link_to @tomorrow[23].name, action: 'index', id: @tomorrow[23].id end %></td><td><%= if !@tomorrow[23].nil? then @tomorrow[23].place end %></td></th>
    <% elsif !@tomorrow[23].nil? && @tomorrow[23].category == 4 %>
      <tr height = "38" bgcolor="#FFD700"><td><%= if !@tomorrow[23].nil? then link_to @tomorrow[23].name, action: 'index', id: @tomorrow[23].id end %></td><td><%= if !@tomorrow[23].nil? then @tomorrow[23].place end %></td></th>
      <% else %>
    <tr height = "38"><td><%= if !@tomorrow[23].nil? then link_to @tomorrow[23].name, action: 'index', id: @tomorrow[23].id end %></td><td><%= if !@tomorrow[23].nil? then @tomorrow[23].place end %></td></tr>
     <% end %>

  </tbody>
  </head>
</table>

<br>
</div>
<%= javascript_include_tag "event_calendar" %>
<div id="group">
<div id="calendar">
<%#= link_to("newold", :controller => "events", :action => "new") %>
<%= link_to '新規', '#', class: 'newopen' %>
<%= raw(event_calendar) %>
</div>
<div id=detail><%= render partial: 'detail', locals:{event: @event, id: params[:id]} %></div>
<div id=todolist><%= render partial: 'todolist', locals:{todos: @todos, new_todo: @new_todo} %></div>
</div>
<div id="newmodal" style="display:none;">

<%= form_for @new_event, url: '/event/create', :html => {:onsubmit => "return selectedDates()"} do |f| %>
    <%= f.hidden_field :id %>
    <p><b><%= f.label :name, "タイトル" %></b><br>
    <%= f.text_field :name %></p>
    <p><b><%= f.label :start_at, "開始時刻" %></b><br>
      <%= raw sprintf(f.datetime_select(:start_at, :default => Time.now.in_time_zone('Tokyo'), :use_month_numbers => true, :date_separator => '%s', :datetime_separator => ' %s', :time_separator => '%s'),'年 ','月 ','日 ','時 ')+'分'%></p>
      <p><b><%= f.label :end_at,"終了時刻" %></b><br>
      <%= raw sprintf(f.datetime_select(:end_at, :default => Time.now.in_time_zone('Tokyo'), :use_month_numbers => true, :date_separator => '%s', :datetime_separator => ' %s', :time_separator => '%s'),'年 ','月 ','日 ','時 ')+'分'%></p>
    <p><b><%= f.label :place, "場所" %></b><br>
    <%= f.text_field :place %></p>
    <p><b><%= f.label :person, "相手" %></b><br>
    <%= f.text_field :person %></p>
    <p><b><%= f.label :baggage, "持ち物" %></b><br>
    <%= f.text_field :baggage %></p>
    <p><b><%= f.label :category, "カテゴリ"%></b><br>
    <%= f.select :category, [["遊び", 1],["研究室", 2],["バイト", 3],["授業", 4],["その他",0]] %></p>
    <div >
      <p><b>繰り返し設定</b><br>
      <%= f.check_box :mon %>
      <%= f.label :mon, "月 " %>
      <%= f.check_box :tue %>
      <%= f.label :tue, "火 " %>
      <%= f.check_box :wed %>
      <%= f.label :wed, "水 " %>
      <%= f.check_box :thu %>
      <%= f.label :thu, "木 " %>
      <%= f.check_box :fri %>
      <%= f.label :fri, "金 " %>
      <%= f.check_box :sat %>
      <%= f.label :sat, "土 " %>
      <%= f.check_box :sun %>
      <%= f.label :sun, "日 " %><br>
      <%= f.label :deadline, "繰り返し終了" %><br>
      <%= raw sprintf(f.date_select(:deadline, :default => Time.now.in_time_zone('Tokyo'), :use_month_numbers => true, :date_separator => '%s'),'年 ','月 ',)+'日'%></p>
    </div>
    <p><b><a id="button" href="javascript:;">一括登録</a></b></p>
    <p><div id="addMonth"></div></p>
    <%= f.submit "送信"%>
<% end %>
</div>

<div id="editmodal" style="display:none;">
<%#= form_for@event, url: event_path do |f| %>
<%# @event = @new_event %>
<%= form_for @event, url: '/event/create' do |f| %>
    <%= f.hidden_field :id %>
    <p><b><%= f.label :name, "タイトル" %></b><br>
    <%= f.text_field :name %></p>
    <p><b><%= f.label :start_at, "開始時刻"%></b><br>
    <%= raw sprintf(f.datetime_select(:start_at, :default => Time.now.in_time_zone('Tokyo'), :use_month_numbers => true, :date_separator => '%s', :datetime_separator => ' %s', :time_separator => '%s'),'年 ','月 ','日 ','時 ')+'分'%></p>
    <p><b><%= f.label :end_at,"終了時刻" %></b><br>
    <%= raw sprintf(f.datetime_select(:end_at, :default => Time.now.in_time_zone('Tokyo'), :use_month_numbers => true, :date_separator => '%s', :datetime_separator => ' %s', :time_separator => '%s'),'年 ','月 ','日 ','時 ')+'分'%></p>
    <p><b><%= f.label :place, "場所" %></b><br>
    <%= f.text_field :place %></p>
    <p><b><%= f.label :person, "相手" %></b><br>
    <%= f.text_field :person %></p>
    <p><b><%= f.label :baggage, "持ち物" %></b><br>
    <%= f.text_field :baggage %></p>
    <p><b><%= f.label :category, "カテゴリ"%></b><br>
    <%= f.select :category, [["遊び", 1],["研究室", 2],["バイト", 3],["授業", 4],["その他", 0]] %></p>
    <%= f.submit "送信", name:"update_button" %>
    <%= f.submit "削除", name:"delete_button", data:{:confirm => "本当に削除しますか?"} %>
    <%= f.submit "以降の繰り返し予定を削除", name:"delete_all_button", data:{:confirm => "本当に削除しますか?"} %>
<% end %>
</div>


<!-- <script type="text/javascript" src="js/jquery-1.5.1.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.11.custom.min.js"></script>
<script type="text/javascript"> -->
<script>
  $(function() {
    $('.newopen').click(function() {
      $('#newmodal').dialog({
        modal: true,
        resizable: true,
        width: 'auto',
        title: '新規作成'
      });
    });
    $('.editopen').click(function() {
      $('#editmodal').dialog({
        modal: true,
        resizable: true,
        width: 'auto',
        title: '編集'
      });
    });
  });
</script>

<%#= javascript_include_tag "application" %>

<script>
// Namespace

// var sel = document.getElementById('addMonth');
var PRJ = PRJ || {};
dates = [];

function pad2(arg) {
  var tmp = '00' + arg;
  return tmp.slice(-2, tmp.length);
}

(function($, d, ns){
    'use strict';
 
    var addMonth = {
        c: {
            done: '<a href="javascript:;" id="done">非表示</a>'
        },
        initialize: function() {
            this.$elm = $('#addMonth');
            this.$elm.datepicker({
                onSelect: $.proxy(this.handleSelect, this),
                beforeShowDay: $.proxy(this.beforeShowDay, this),
                dateFormat: 'yy/mm/dd'
            }).hide();
            this.$done = $(this.c.done);
            this.$done.click($.proxy(this.handleDone, this));
            this.$elm.append(this.$done);
            this.$btn = $('#button');
            this.$btn.click($.proxy(this.handleClick, this));
            this.selected = [];
        },
        handleClick: function() {
            this.$elm.show();
        },
        handleDone: function() {
            this.$elm.hide();
        },
        handleSelect: function(date) {
            var index = $.inArray(date, this.selected);
            if(index == -1) {
                this.selected.push(date);
                dates.push(date);
            } else {
                delete this.selected[index];
                delete dates[index];
            }
        },
        beforeShowDay: function(date) {
            var theday = date.getFullYear() + '/' +
                pad2(date.getMonth()+1)+'/'+
                pad2(date.getDate());
 
            return [true, $.inArray(theday, this.selected)>=0? 'selected':''];
        }
    };
 
    // Export
    ns.addMonth = addMonth;
 
})(jQuery, document, PRJ);
 
$(function() {
    PRJ.addMonth.initialize();
});
</script>


<!-- ++++++++++++ For input with drag ++++++++++++++++++ -->
<script>
var startCell = null;
// tableの中のcellの位置を取得する
function getCellPos(table, cell){
    var pos = new Object();
    if(cell.nodeName == "TD"){
        var x, y, cells;
        for(y=0; y<table.rows.length; y++){
            row = table.rows.item(y);
            for(x=0; x<row.cells.length; x++){
                if(row.cells.item(x) == cell){
                    pos.row = y;
                    pos.col = x;
                    return pos;
                }
            }
        }
    }
    return null;
}


// マウス移動のイベント処理
function mouseMove(table, e){
    if (!e) var e = window.event;

    var endCell = e.target;
    if(!(endCell.tagName=="TD" && startCell)){
      return false;
    }

    // セルの位置を取得
    var from = getCellPos(table, startCell);
    var to = getCellPos(table, endCell);
    if(!from || !to){
        return false;
    }

    // 色を変更
    var x, y, cells;
    for(y=0; y<table.rows.length; y++){
        row = table.rows.item(y);
        for(x=0; x<row.cells.length; x++){
            if((from.row-y)*(y-to.row)>=0 && (from.col-x)*(x-to.col)>=0)
                row.cells.item(x).style.backgroundColor = "#ffdddd";// 選択状態の色
            else
                row.cells.item(x).style.backgroundColor = "transparent";// 未選択状態の色
        }
    }
}


// マウスダウンのイベント処理
function mouseDown(table, e){
    if (!e) var e = window.event;
    startCell = e.target;
    if(startCell.tagName != "TD"){
        startCell = null;
        return;
    }
    mouseMove(table, e);
}

// マウスアップのイベント処理
function mouseUp(table, e){
    if (!e) var e = window.event;
    var endCell = e.target;
    if(!(endCell.tagName=="TD" && startCell)){
        return false;
    }
    // セルの位置を取得
    var from = getCellPos(table, startCell);
    var to = getCellPos(table, endCell);
    if(!from || !to){
        return false;
    }

    // セル内の文字を取得
    var time_start = startCell.innerText
    var time_end = endCell.innerText

    // hourとminuteに分解して配列にする
    time_start = time_start.split(':');
    time_end = time_end.split(':')

    // 下から上にドラッグした際のスワップ操作
    if(time_start[0].to_i > time_end[0].to_i){
      var temp = time_end[0]
      time_end[0] = time_start[0]
      time_start = temp;
    }

    // minuteの値が一桁の場合は先頭の"0"を削除
    time_start[1] = (time_start[1].indexOf("0") == 0) ?
                    time_start[1].substr(1) : time_start[1];

    time_end[1] = (time_end[1].indexOf("0") == 0) ?
                    time_end[1].substr(1) : time_end[1];

    // mouseMoveで選択状態表示の更新をさせないようにする
    startCell = null;

    // // デフォルト選択の解除
    // var elm_hour = $('#event_start_at_4i').find('option')
    // elm_hour = [elm_hour[elm_hour.selectedIndex],
    //                   elm_hour[elm_hour.selectedIndex]];
    //                   console.log(elm_hour);
    //
    // var elm_minute = $('#event_start_at_5i').find('option')
    // elm_minute = [elm_minute[elm_minute.selectedIndex],
    //                   elm_minute[elm_minute.selectedIndex]]
    //                   console.log(elm_minute);
    //
    // $.each(elm_hour, function(selected_hour, index){
    //   selected_hour.selected = false;
    // });
    //
    // $.each(elm_minute, function(selected_minute, index){
    //   selected_minute.selected = false;
    // });

    // ドラッグで選択した始点と終点の値をデフォルトに設定
    $('#event_start_at_4i').find('option')[time_start[0]].selected = true;
    $('#event_start_at_5i').find('option')[time_start[1]].selected = true;
    $('#event_end_at_4i').find('option')[time_end[0]].selected = true;
    $('#event_end_at_5i').find('option')[time_end[1]].selected = true;

    // mouseMoveで選択状態表示の更新をさせないようにする
    startCell = null;
    // ここに選択後の処理を書く
    $(function(){
      $('#newmodal').dialog({
        modal: true,
        resizable: true,
        width: 'auto',
        title: '新規作成'
      });
    });
}
</script>
